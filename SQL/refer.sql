SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;

USE `memorial`;

-- Логирование начала миграции
INSERT INTO `log` (userId, code, msg) VALUES (NULL, 'MIG001', 'Начало миграции v1 - добавление поля conscription_place');

-- Вставляем воинские звания ДО 1943 года (старая система)
INSERT IGNORE INTO `military_rank` (`name`, `category`, `rank_order`, `description`) VALUES
-- Рядовой и младший командный состав (до 1943)
('Красноармеец', 'before_1943', 1, 'Рядовой состав'),
('Отделенный командир', 'before_1943', 2, 'Аналог ефрейтора'),
('Младший комвзвода', 'before_1943', 3, 'Младший командир взвода'),
('Старшина', 'before_1943', 4, 'Старшина роты'),

-- Средний командный состав (до 1943)
('Младший лейтенант', 'before_1943', 5, 'Младший лейтенант'),
('Лейтенант', 'before_1943', 6, 'Лейтенант'),
('Старший лейтенант', 'before_1943', 7, 'Старший лейтенант'),
('Капитан', 'before_1943', 8, 'Капитан'),

-- Старший командный состав (до 1943)
('Майор', 'before_1943', 9, 'Майор'),
('Подполковник', 'before_1943', 10, 'Подполковник'),
('Полковник', 'before_1943', 11, 'Полковник'),

-- Высший командный состав (до 1943)
('Комбриг', 'before_1943', 12, 'Командир бригады'),
('Комдив', 'before_1943', 13, 'Командир дивизии'),
('Комкор', 'before_1943', 14, 'Командир корпуса'),
('Командарм 2-го ранга', 'before_1943', 15, 'Командующий армией 2 ранга'),
('Командарм 1-го ранга', 'before_1943', 16, 'Командующий армией 1 ранга'),
('Маршал Советского Союза', 'before_1943', 17, 'Маршал Советского Союза'),

-- Воинские звания ПОСЛЕ 1943 года (новая система)
('Рядовой', 'after_1943', 1, 'Рядовой состав'),
('Ефрейтор', 'after_1943', 2, 'Ефрейтор'),

-- Сержантский состав (после 1943)
('Младший сержант', 'after_1943', 3, 'Младший сержант'),
('Сержант', 'after_1943', 4, 'Сержант'),
('Старший сержант', 'after_1943', 5, 'Старший сержант'),
('Старшина', 'after_1943', 6, 'Старшина'),

-- Офицерский состав (после 1943)
('Младший лейтенант', 'after_1943', 7, 'Младший лейтенант'),
('Лейтенант', 'after_1943', 8, 'Лейтенант'),
('Старший лейтенант', 'after_1943', 9, 'Старший лейтенант'),
('Капитан', 'after_1943', 10, 'Капитан'),
('Майор', 'after_1943', 11, 'Майор'),
('Подполковник', 'after_1943', 12, 'Подполковник'),
('Полковник', 'after_1943', 13, 'Полковник'),

-- Генералы (после 1943)
('Генерал-майор', 'after_1943', 14, 'Генерал-майор'),
('Генерал-лейтенант', 'after_1943', 15, 'Генерал-лейтенант'),
('Генерал-полковник', 'after_1943', 16, 'Генерал-полковник'),
('Генерал армии', 'after_1943', 17, 'Генерал армии'),
('Маршал Советского Союза', 'after_1943', 18, 'Маршал Советского Союза');

-- Вставляем тестовые данные в справочник наград
INSERT IGNORE INTO `military_award` (`name`, `description`, `institution_date`, `status`) VALUES
('Орден Ленина', 'Высшая награда СССР за особо выдающиеся заслуги', '06.04.1930', 'active'),
('Орден Красного Знамени', 'За особую храбрость, самоотверженность и мужество', '01.08.1924', 'active'),
('Орден Отечественной войны I степени', 'За храбрость, стойкость и мужество в боях', '20.05.1942', 'active'),
('Орден Отечественной войны II степени', 'За храбрость, стойкость и мужество в боях', '20.05.1942', 'active'),
('Орден Александра Невского', 'За выдающиеся заслуги в организации и руководстве боевыми операциями', '29.07.1942', 'active'),
('Орден Кутузова I степени', 'За успешное проведение боевых операций', '29.07.1942', 'active'),
('Орден Кутузова II степени', 'За успешное проведение боевых операций', '29.07.1942', 'active'),
('Орден Суворова I степени', 'За выдающиеся успехи в деле управления войсками', '29.07.1942', 'active'),
('Орден Суворова II степени', 'За выдающиеся успехи в деле управления войсками', '29.07.1942', 'active'),
('Орден Богдана Хмельницкого I степени', 'За успешные операции в боях с врагом', '10.10.1943', 'active'),
('Орден Богдана Хмельницкого II степени', 'За успешные операции в боях с врагом', '10.10.1943', 'active'),
('Орден Славы I степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Орден Славы II степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Орден Славы III степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Медаль \"Золотая Звезда\"', 'Знак особого отличия Героя Советского Союза', '01.08.1939', 'active'),
('Медаль \"За отвагу\"', 'За личное мужество и отвагу в боях', '17.10.1938', 'active'),
('Медаль \"За боевые заслуги\"', 'За умелые инициативные действия в бою', '17.10.1938', 'active'),
('Медаль \"За оборону Москвы\"', 'Участникам обороны Москвы', '01.05.1944', 'active'),
('Медаль \"За оборону Ленинграда\"', 'Участникам обороны Ленинграда', '22.12.1942', 'active'),
('Медаль \"За оборону Сталинграда\"', 'Участникам обороны Сталинграда', '22.12.1942', 'active'),
('Медаль \"За победу над Германией\"', 'Участникам войны против Германии', '09.05.1945', 'active'),
('Медаль \"За взятие Берлина\"', 'Участникам взятия Берлина', '09.06.1945', 'active');


-- Вставляем базовые статусы бойцов
INSERT IGNORE INTO `fighter_status` (`name`, `color`, `description`) VALUES
('Черновик', '#6c757d', 'Запись в процессе заполнения'),
('На модерации', '#ffc107', 'Ожидает проверки модератором'),
('Опубликован', '#28a745', 'Проверен и опубликован'),
('Отклонен', '#dc3545', 'Отклонен модератором'),
('Архив', '#6c757d', 'Перемещен в архив');


SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

