SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;

USE `memorial`;

-- Логирование начала миграции
INSERT INTO `log` (userId, code, msg) VALUES (NULL, 'MIG001', 'Начало миграции v1 - добавление поля conscription_place');

-- Вставляем воинские звания ДО 1943 года (старая система)
INSERT IGNORE INTO `military_rank` (`name`, `category`, `rank_order`, `description`) VALUES
-- Рядовой и младший командный состав (до 1943)
('Красноармеец', 'before_1943', 1, 'Рядовой состав'),
('Отделенный командир', 'before_1943', 2, 'Аналог ефрейтора'),
('Младший комвзвода', 'before_1943', 3, 'Младший командир взвода'),
('Старшина', 'before_1943', 4, 'Старшина роты'),

-- Средний командный состав (до 1943)
('Младший лейтенант', 'before_1943', 5, 'Младший лейтенант'),
('Лейтенант', 'before_1943', 6, 'Лейтенант'),
('Старший лейтенант', 'before_1943', 7, 'Старший лейтенант'),
('Капитан', 'before_1943', 8, 'Капитан'),

-- Старший командный состав (до 1943)
('Майор', 'before_1943', 9, 'Майор'),
('Подполковник', 'before_1943', 10, 'Подполковник'),
('Полковник', 'before_1943', 11, 'Полковник'),

-- Высший командный состав (до 1943)
('Комбриг', 'before_1943', 12, 'Командир бригады'),
('Комдив', 'before_1943', 13, 'Командир дивизии'),
('Комкор', 'before_1943', 14, 'Командир корпуса'),
('Командарм 2-го ранга', 'before_1943', 15, 'Командующий армией 2 ранга'),
('Командарм 1-го ранга', 'before_1943', 16, 'Командующий армией 1 ранга'),
('Маршал Советского Союза', 'before_1943', 17, 'Маршал Советского Союза'),

-- Рядовой состав (до 1943)
('Краснофлотец', 'before_1943', 18, 'Краснофлотец'),
('Старший краснофлотец', 'before_1943', 19, 'Старший краснофлотец'),

-- Младший командный и младший начальствующий составы (до 1943)
('Старшина 2-й статьи', 'before_1943', 20, 'Старшина 2-й статьи'),
('Старшина 1-й статьи', 'before_1943', 21, 'Старшина 1-й статьи'),
('Главный старшина', 'before_1943', 22, 'Главный старшина'),
('Мичман', 'before_1943', 23, 'Мичман'),

-- Старший командный состав (до 1943)
('Капитан-лейтенант', 'before_1943', 24, 'Капитан-лейтенант'),
('Капитан 3-го ранга', 'before_1943', 25, 'Капитан 3-го ранга'),
('Капитан 2-го ранга', 'before_1943', 26, 'Капитан 2-го ранга'),
('Капитан 1-го ранга', 'before_1943', 27, 'Капитан 1-го ранга'),

-- Высший командный состав (до 1943)
('Контр-адмирал', 'before_1943', 28, 'Контр-адмирал'),
('Вице-адмирал', 'before_1943', 29, 'Вице-адмирал'),
('Адмирал', 'before_1943', 30, 'Адмирал'),
('Адмирал флота', 'before_1943', 31, 'Адмирал флота'),

('Младший техник-лейтенант', 'before_1943', 32, 'Младший техник-лейтенант'),
('Техник-лейтенант', 'after_1943', 33, 'Техник-лейтенант'),
('Старший техник-лейтенант', 'after_1943', 34, 'Старший техник-лейтенант'),
('Инженер-капитан', 'after_1943', 35, 'Инженер-капитан'),
('Инженер-майор', 'after_1943', 36, 'Инженер-майор'),
('Инженер-подполковник', 'after_1943', 37, 'Инженер-подполковник'),
('Инженер-полковник', 'after_1943', 38, 'Инженер-полковник'),
('Инженер-генерал-майор', 'after_1943', 39, 'Инженер-генерал-майор'),
('Инженер-генерал-лейтенант', 'after_1943', 40, 'Инженер-генерал-лейтенант'),
('Инженер-генерал-полковник', 'after_1943', 41, 'Инженер-генерал-полковник'),

('Инженер-капитан-лейтенант', 'after_1943', 42, 'Инженер-капитан-лейтенант'),
('Инженер-Капитан 3 ранга', 'after_1943', 43, 'Инженер-Капитан 3 ранга'),
('Инженер-Капитан 2 ранга', 'after_1943', 44, 'Инженер-Капитан 2 ранга'),
('Инженер-Капитан 1 ранга', 'after_1943', 45, 'Инженер-Капитан 1 ранга'),
('Инженер-Контр-адмирал', 'after_1943', 46, 'Инженер-Контр-адмирал'),
('Инженер-Вице-адмирал', 'after_1943', 47, 'Инженер-Вице-адмирал'),
('Инженер-Адмирал', 'after_1943', 48, 'Инженер-Адмирал'),

('Младший лейтенант медицинской службы', 'after_1943', 48, 'Младший лейтенант медицинской службы'),
('Лейтенант медицинской службы', 'after_1943', 48, 'Лейтенант медицинской службы'),
('Старший лейтенант медицинской службы', 'after_1943', 48, 'Старший лейтенант медицинской службы'),
('Капитан медицинской службы', 'after_1943', 48, 'Капитан медицинской службы'),
('Майор медицинской службы', 'after_1943', 48, 'Майор медицинской службы'),
('Подполковник медицинской службы', 'after_1943', 48, 'Подполковник медицинской службы'),
('Полковник медицинской службы', 'after_1943', 48, 'Полковник медицинской службы'),
('Генерал-майор медицинской службы', 'after_1943', 48, 'Генерал-майор медицинской службы'),
('Генерал-лейтенант медицинской службы', 'after_1943', 48, 'Генерал-лейтенант медицинской службы'),
('Генерал-полковник медицинской службы', 'after_1943', 48, 'Генерал-полковник медицинской службы'),

('Младший лейтенант ветеринарной службы', 'after_1943', 48, 'Младший лейтенант ветеринарной службы'),
('Лейтенант ветеринарной службы', 'after_1943', 48, 'Лейтенант ветеринарной службы'),
('Старший лейтенант ветеринарной службы', 'after_1943', 48, 'Старший лейтенант ветеринарной службы'),
('Капитан ветеринарной службы', 'after_1943', 48, 'Капитан ветеринарной службы'),
('Майор ветеринарной службы', 'after_1943', 48, 'Майор ветеринарной службы'),
('Подполковник ветеринарной службы', 'after_1943', 48, 'Подполковник ветеринарной службы'),
('Полковник ветеринарной службы', 'after_1943', 48, 'Полковник ветеринарной службы'),
('Генерал-майор ветеринарной службы', 'after_1943', 48, 'Генерал-майор ветеринарной службы'),
('Генерал-лейтенант ветеринарной службы', 'after_1943', 48, 'Генерал-лейтенант ветеринарной службы'),
('Генерал-полковник ветеринарной службы', 'after_1943', 48, 'Генерал-полковник ветеринарной службы'),

('Младший лейтенант административной службы', 'after_1943', 48, 'Младший лейтенант административной службы'),
('Лейтенант административной службы', 'after_1943', 48, 'Лейтенант административной службы'),
('Старший лейтенант административной службы', 'after_1943', 48, 'Старший лейтенант административной службы'),
('Капитан административной службы', 'after_1943', 48, 'Капитан административной службы'),
('Майор административной службы', 'after_1943', 48, 'Майор административной службы'),
('Подполковник административной службы', 'after_1943', 48, 'Подполковник административной службы'),
('Полковник административной службы', 'after_1943', 48, 'Полковник административной службы'),
('Генерал-майор административной службы', 'after_1943', 48, 'Генерал-майор административной службы'),
('Генерал-лейтенант административной службы', 'after_1943', 48, 'Генерал-лейтенант административной службы'),
('Генерал-полковник административной службы', 'after_1943', 48, 'Генерал-полковник административной службы'),

('Младший лейтенант юстиции', 'after_1943', 48, 'Младший лейтенант'),
('Лейтенант юстиции', 'after_1943', 48, 'Лейтенант юстиции'),
('Старший лейтенант юстиции', 'after_1943', 48, 'Старший лейтенант юстиции'),
('Капитан юстиции', 'after_1943', 48, 'Капитан юстиции'),
('Майор юстиции', 'after_1943', 48, 'Майор юстиции'),
('Подполковник юстиции', 'after_1943', 48, 'Подполковник юстиции'),
('Полковник юстиции', 'after_1943', 48, 'Полковник юстиции'),
('Генерал-майор юстиции', 'after_1943', 48, 'Генерал-майор юстиции'),
('Генерал-лейтенант юстиции', 'after_1943', 48, 'Генерал-лейтенант юстиции'),
('Генерал-полковник юстиции', 'after_1943', 48, 'Генерал-полковник юстиции'),
		

-- Воинские звания ПОСЛЕ 1943 года (новая система)
('Рядовой', 'after_1943', 1, 'Рядовой состав'),
('Ефрейтор', 'after_1943', 2, 'Ефрейтор'),

-- Сержантский состав (после 1943)
('Младший сержант', 'after_1943', 3, 'Младший сержант'),
('Сержант', 'after_1943', 4, 'Сержант'),
('Старший сержант', 'after_1943', 5, 'Старший сержант'),
('Старшина', 'after_1943', 6, 'Старшина'),

-- Офицерский состав (после 1943)
('Капитан', 'after_1943', 10, 'Капитан'),
('Майор', 'after_1943', 11, 'Майор'),
('Подполковник', 'after_1943', 12, 'Подполковник'),
('Полковник', 'after_1943', 13, 'Полковник'),

-- Генералы (после 1943)
('Генерал-майор', 'after_1943', 14, 'Генерал-майор'),
('Генерал-лейтенант', 'after_1943', 15, 'Генерал-лейтенант'),
('Генерал-полковник', 'after_1943', 16, 'Генерал-полковник'),
('Генерал армии', 'after_1943', 17, 'Генерал армии'),
('Маршал Советского Союза', 'after_1943', 18, 'Маршал Советского Союза');


-- Вставляем тестовые данные в справочник наград
INSERT IGNORE INTO `military_award` (`name`, `description`, `institution_date`, `status`) VALUES
('Орден Ленина', 'Высшая награда СССР за особо выдающиеся заслуги', '06.04.1930', 'active'),
('Орден Красного Знамени', 'За особую храбрость, самоотверженность и мужество', '01.08.1924', 'active'),
('Орден Отечественной войны I степени', 'За храбрость, стойкость и мужество в боях', '20.05.1942', 'active'),
('Орден Отечественной войны II степени', 'За храбрость, стойкость и мужество в боях', '20.05.1942', 'active'),
('Орден Александра Невского', 'За выдающиеся заслуги в организации и руководстве боевыми операциями', '29.07.1942', 'active'),
('Орден Кутузова I степени', 'За успешное проведение боевых операций', '29.07.1942', 'active'),
('Орден Кутузова II степени', 'За успешное проведение боевых операций', '29.07.1942', 'active'),
('Орден Суворова I степени', 'За выдающиеся успехи в деле управления войсками', '29.07.1942', 'active'),
('Орден Суворова II степени', 'За выдающиеся успехи в деле управления войсками', '29.07.1942', 'active'),
('Орден Богдана Хмельницкого I степени', 'За успешные операции в боях с врагом', '10.10.1943', 'active'),
('Орден Богдана Хмельницкого II степени', 'За успешные операции в боях с врагом', '10.10.1943', 'active'),
('Орден Славы I степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Орден Славы II степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Орден Славы III степени', 'За личные подвиги в бою', '08.11.1943', 'active'),
('Медаль \"Золотая Звезда\"', 'Знак особого отличия Героя Советского Союза', '01.08.1939', 'active'),
('Медаль \"За отвагу\"', 'За личное мужество и отвагу в боях', '17.10.1938', 'active'),
('Медаль \"За боевые заслуги\"', 'За умелые инициативные действия в бою', '17.10.1938', 'active'),
('Медаль \"За оборону Москвы\"', 'Участникам обороны Москвы', '01.05.1944', 'active'),
('Медаль \"За оборону Ленинграда\"', 'Участникам обороны Ленинграда', '22.12.1942', 'active'),
('Медаль \"За оборону Сталинграда\"', 'Участникам обороны Сталинграда', '22.12.1942', 'active'),
('Медаль \"За победу над Германией\"', 'Участникам войны против Германии', '09.05.1945', 'active'),
('Медаль \"За взятие Берлина\"', 'Участникам взятия Берлина', '09.06.1945', 'active'),
('Орден Красной Звезды', 'За большие заслуги в деле обороны СССР как в военное, так и в мирное время, в обеспечении государственной безопасности.', '06.04.1930', 'active');

-- Вставляем базовые статусы бойцов
INSERT IGNORE INTO `fighter_status` (`name`, `color`, `description`) VALUES
('Черновик', '#6c757d', 'Запись в процессе заполнения'),
('На модерации', '#ffc107', 'Ожидает проверки модератором'),
('Опубликован', '#28a745', 'Проверен и опубликован'),
('Отклонен', '#dc3545', 'Отклонен модератором'),
('Архив', '#6c757d', 'Перемещен в архив'),
('Заблокирован', '#343a40', 'Скрыт модератором за нарушение правил');


SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
